<div id="modulo-inventarios">
    <v-container fluid>
        

        <v-row>
            <v-col>
                <v-card>
                    <v-card-title style="background-color: #00b293; color:#ffffff;">
                        Formulario de inventario
                    </v-card-title>
                    <v-container fluid>
                        <v-text-field v-model="search" label="Buscar" append-icon="mdi-magnify" single-line hide-details></v-text-field>

                        <v-row justify="left">
                            <v-col cols="12" xs="8" md="4">
                                <v-btn color="#00b293" class="white--text"  @click="fnNuevo" v-if="rolUsuarioActual === 'ADMINISTRADOR'">
                                    <v-icon left>mdi-plus</v-icon> Nuevo
                                </v-btn>
                            </v-col>
                        </v-row>

                        <v-snackbar
                            v-model="snackbar"
                            :color="snackbarColor"
                            timeout="3000"
                            top
                            right>
                            <v-icon left>{{ snackbarIcon }}</v-icon>
                            <span class="font-weight-bold">{{ snackbarMensaje }}</span>
                        </v-snackbar>

                        <!-- Tabla -->
                        <v-row justify="center" v-if="!mostrarFormulario">
                            <v-col md="12">
                                <v-data-table :headers="headers" :items="datosTabla" :search="search">
                                    <template v-slot:item.ver_mas="{ item }">
                                        <v-btn small color="info" @click="fnVerMas(item)">Ver más</v-btn>
                                    </template>
                                    <template v-slot:item.editar="{ item }">
                                        <v-btn fab small color="warning" @click="fnCargarDatosEditar(item)" v-if="rolUsuarioActual === 'ADMINISTRADOR'" >
                                            <v-icon>mdi-pencil</v-icon>
                                        </v-btn>
                                    </template>
                                    <template v-slot:item.eliminar="{ item }">
                                        <v-btn fab small color="error" @click="fnEliminar(item)" v-if="rolUsuarioActual === 'ADMINISTRADOR'" >
                                            <v-icon>mdi-trash-can</v-icon>
                                        </v-btn>
                                    </template>
                                    <template v-slot:item.equipoId="{ item }">
                                        <span>{{ item.equipoId }}</span>
                                    </template>
                                </v-data-table>
                            </v-col>
                        </v-row>

                        <!-- Diálogo -->
                        <v-dialog v-model="dialog" max-width="600">
                            <v-card>
                                <v-card-title>Datos completos del equipo</v-card-title>
                                <v-card-text>
                                    <ul v-if="objetoSeleccionado">
                                        <li><strong>Nombre del Equipo:</strong> {{ objetoSeleccionado.nombreEquipo }}</li>
                                        <li><strong>Número de Empleado:</strong> {{ objetoSeleccionado.noEmp }}</li>
                                        <li><strong>Nombre del Responsable:</strong> {{ objetoSeleccionado.nombre }}</li>
                                        <li><strong>Correo:</strong> {{ objetoSeleccionado.correo }}</li>
                                        <li><strong>Edificio:</strong> {{ objetoSeleccionado.edificio }}</li>
                                        <li><strong>Departamento:</strong> {{ objetoSeleccionado.departamento }}</li>
                                        <li><strong>Marca:</strong> {{ objetoSeleccionado.marca }}</li>
                                        <li><strong>Modelo:</strong> {{ objetoSeleccionado.modelo }}</li>
                                        <li><strong>Dirección IP:</strong> {{ objetoSeleccionado.ip }}</li>
                                        <li><strong>MAC Address:</strong> {{ objetoSeleccionado.mac }}</li>
                                        <li><strong>Número de Serie:</strong> {{ objetoSeleccionado.noSerie }}</li>
                                        <li><strong>Número UTL:</strong> {{ objetoSeleccionado.noUtl }}</li>
                                        <li><strong>Capacidad:</strong> {{ objetoSeleccionado.capacidad }}</li>
                                        <li><strong>RAM:</strong> {{ objetoSeleccionado.ram }}</li>
                                        <li><strong>CPU:</strong> {{ objetoSeleccionado.cpu }}</li>
                                        <li><strong>Estado:</strong> {{ objetoSeleccionado.estado }}</li>
                                        <li><strong>Descripción del Equipo:</strong> {{ objetoSeleccionado.descripcionEquipo }}</li>
                                    </ul>
                                </v-card-text>
                                <v-card-actions class="justify-end">
                                    <v-btn text @click="dialog = false">Cerrar</v-btn>
                                </v-card-actions>
                            </v-card>
                        </v-dialog>

                        <!-- Formulario en pasos -->
                        <div v-if="mostrarFormulario">
                            <!-- Paso 1 -->
                            <div v-if="paso === 1">
                                <v-row>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="noEmp" label="Número de Empleado" @blur="buscarEmpleadoPorNumero"></v-text-field>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="nombre" label="Nombre del responsable" readonly></v-text-field>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="correo" label="Correo del Responsable" readonly></v-text-field>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="edificio" label="Edificio donde se encuentra el equipo"></v-text-field>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="departamento" label="Departamento en el que se encuentra el equipo"></v-text-field>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-text-field outlined v-model="nombreEquipo" label="Nombre del Equipo"></v-text-field>
                                    </v-col>
                                </v-row>
                                <v-row justify="center">
                                    <v-btn color="primary" @click="paso = 2">Siguiente</v-btn>
                                </v-row>
                            </div>

                            <!-- Paso 2 -->
                            <div v-if="paso === 2">
                                <v-row>
                                    <v-col cols="4"><v-text-field outlined v-model="marca" label="Marca"></v-text-field></v-col>
                                    <v-col cols="4"><v-textarea outlined v-model="modelo" label="Modelo"></v-textarea></v-col>
                                    <v-col cols="4"><v-text-field outlined v-model="noSerie" label="Número de serie"></v-text-field></v-col>
                                    <v-col cols="4"><v-text-field outlined v-model="noUtl" label="Número UTL"></v-text-field></v-col>
                                    <v-col cols="4"><v-text-field outlined v-model="capacidad" label="Capacidad"></v-text-field></v-col>
                                    <v-col cols="4"><v-text-field outlined v-model="ram" label="RAM"></v-text-field></v-col>
                                </v-row>
                                <v-row justify="space-between">
                                    <v-btn color="secondary" @click="paso = 1">Regresar</v-btn>
                                    <v-btn color="primary" @click="paso = 3">Siguiente</v-btn>
                                </v-row>
                            </div>

                            <!-- Paso 3 -->
                            <div v-if="paso === 3">
                                <v-row>
                                    <v-col cols="4"><v-text-field outlined v-model="ip" label="Dirección IP"></v-text-field></v-col>
                                    <v-col cols="4"><v-text-field v-model="mac" label="Dirección MAC" outlined maxlength="17" placeholder="AA:BB:CC:DD:EE:FF"></v-text-field></v-col>
                                    <v-col cols="4"><v-text-field outlined v-model="cpu" label="CPU"></v-text-field></v-col>
                                    <v-col cols="4">
                                        <v-select outlined v-model="estado" :items="['EXCELENTE', 'BUENO', 'MALO']" label="Estado del equipo"></v-select>
                                    </v-col>
                                    <v-col cols="4">
                                        <v-select outlined v-model="mantenimiento" :items="['MENSUAL', 'TRIMESTRAL', 'SEMESTRAL', 'ANUAL']" label="Mantenimiento"></v-select>
                                    </v-col>
                                    <v-col cols="8"><v-textarea outlined v-model="descripcionEquipo" label="Descripción del Equipo"></v-textarea></v-col>
                                </v-row>
                                <v-row justify="space-between">
                                    <v-btn color="secondary" @click="paso = 2">Regresar</v-btn>
                                    <v-btn v-if="!flagEditar" color="primary" @click="fnGuardar()" v-if="rolUsuarioActual === 'ADMINISTRADOR'">
                                        <v-icon>mdi-content-save</v-icon> Guardar
                                    </v-btn>
                                    <v-btn v-else color="primary" @click="fnEditar()">
                                        <v-icon>mdi-content-save</v-icon> Editar
                                    </v-btn>
                                </v-row>
                            </div>
                        </div>
                    </v-container>
                </v-card>
            </v-col>
        </v-row>
           
    </v-container>
</div>

<script src="inventarios.js" type="text/javascript"></script>
